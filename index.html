<html>
<head>
<title>My Workload Optimator</title>
<script src="knapsack.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="tiedot.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="tyylit.css">
</head>
<body>
<h1>My Workload Optimator</h1>
<p>Silja Karesto & Mia Leskinen</p>

<form>
	<h3>Lisää kurssi</h3>
	<p>Kurssin nimi: <input id="lisaakurssi" type="text"></input>
	Opintopisteet: <input id="lisaaopt" type="text"></input>
	Tunnit: <input id="lisaatunnit" type="text"></input>
	<button id="lisaa-painike" type="button" onclick="lisaaUusiKurssi();">Lisää kurssi</button>
	</p>
</form>

<h3>Kurssit</h3>
<div class="kaikki-kurssit clearfix">
</div>
<p>Optimoi halutessasi muun tuntimäärän mukaan</p>
<input type="text" class="annettu-tuntimaara" placeholder="200" /><br/>
<button type="button" class="optimoi">Optimoi</button>
<p>Optimaalisin valinta: </p>
<div class="lopputulos">

</div>
<script>
$(document).ready(function(){
	for(var kurssi in kaikkiKurssit){
		$('.kaikki-kurssit').append('<div class="yksi-kurssi" id="'+kaikkiKurssit[kurssi].id+'"><div>'+kaikkiKurssit[kurssi].nimi+'</div><div class="oparit">'+kaikkiKurssit[kurssi].b+'</div><div class="tyotunnit">'+kaikkiKurssit[kurssi].w+'</div><button type="button" class="muokkaa-painike" data-tila="valmis">Muokkaa</button><button type="button" class="poista-painike">Poista</button></div>');
	}
	
	$(document).on('click', '.muokkaa-painike', function(){
	if($(this).attr("data-tila") == "valmis"){
		$(this).attr("data-tila", "muokkaa");
		var oparitArvo = $(this).siblings('.oparit').text();
		var tyotunnitArvo = $(this).siblings('.tyotunnit').text();
		$(this).siblings('.oparit').html('<input type="number" value="'+oparitArvo+'" />');
		$(this).siblings('.tyotunnit').html('<input type="number" value="'+tyotunnitArvo+'" />');
		$(this).text("Valmis");
	} else {
		$(this).attr("data-tila", "valmis");
		var oparitArvo = $(this).siblings('.oparit').find('input').val();
		var tyotunnitArvo = $(this).siblings('.tyotunnit').find('input').val();
		$(this).siblings('.oparit').html(oparitArvo);
		$(this).siblings('.tyotunnit').html(tyotunnitArvo);
		var muokattavaId = $(this).parents('.yksi-kurssi').attr('id');
		for(var i = 0; i < kaikkiKurssit.length; i++){
			if(kaikkiKurssit[i].id == muokattavaId){
				kaikkiKurssit[i].b = parseInt(oparitArvo);
				kaikkiKurssit[i].w = parseInt(tyotunnitArvo);
			}
		}
		for(var kurssit in kaikkiKurssit){
		console.log(kaikkiKurssit[kurssit]);
		}
		$(this).text("Muokkaa");
	}
	});
	
	$('.optimoi').on('click', tulostaOptimi);
	
	$(document).on('click', '.poista-painike', function(){
		$(this).parents('.yksi-kurssi').remove();
		var poistettavaId = $(this).parents('.yksi-kurssi').attr('id');
		for(var i = 0; i < kaikkiKurssit.length; i++){
			if(kaikkiKurssit[i].id == poistettavaId){
				kaikkiKurssit.splice(i, 1);
			}
		}
	});
	
});
</script>
</body>
</html>